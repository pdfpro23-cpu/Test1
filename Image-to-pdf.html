<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Image to PDF â€“ pdfpro</title>

<style>
    :root {
        --blue: #1a73e8;
        --blue-dark:#0c47a1;
        --light: #f7faff;
        --radius: 14px;
    }

    body {
        margin: 0;
        background: white;
        font-family: "Segoe UI", sans-serif;
        color: #222;
    }

    /* Container */
    .wrapper {
        max-width: 750px;
        margin: 40px auto;
        padding: 20px;
    }

    /* Header */
    h1 {
        text-align: center;
        color: var(--blue);
        margin-bottom: 10px;
        font-size: 34px;
    }
    p.sub {
        text-align: center;
        color: #555;
        margin-bottom: 30px;
    }

    /* Upload box */
    .upload-box {
        border: 2px dashed var(--blue);
        padding: 40px;
        text-align: center;
        border-radius: var(--radius);
        background: var(--light);
        cursor: pointer;
    }
    .upload-box:hover {
        background: #e8f1ff;
    }
    .upload-box input {
        display: none;
    }

    /* Image preview */
    #preview {
        margin-top: 20px;
        display: none;
        text-align: center;
    }
    #preview img {
        max-width: 100%;
        border-radius: var(--radius);
        box-shadow: 0 4px 14px rgba(0,0,0,0.15);
    }

    /* Format selection */
    .format-box {
        margin-top: 25px;
        text-align: center;
    }
    select {
        padding: 12px 20px;
        font-size: 16px;
        border-radius: var(--radius);
        border: 2px solid var(--blue);
        outline: none;
        cursor: pointer;
        background: white;
    }

    /* Button */
    .btn-convert {
        background: var(--blue);
        color: white;
        border: none;
        padding: 14px 30px;
        font-size: 18px;
        border-radius: var(--radius);
        margin-top: 30px;
        cursor: pointer;
        display: block;
        width: 100%;
        transition: 0.3s;
    }
    .btn-convert:hover {
        background: var(--blue-dark);
    }

    /* Download link */
    #downloadLink {
        display: none;
        margin-top: 25px;
        text-align: center;
    }
    #downloadLink a {
        background: var(--blue-dark);
        color: white;
        padding: 14px 30px;
        border-radius: var(--radius);
        text-decoration: none;
        font-size: 18px;
        transition: 0.3s;
    }
    #downloadLink a:hover {
        background: #073b80;
    }

    /* Mobile */
    @media(max-width: 600px){
        .upload-box { padding: 30px; }
        h1 { font-size: 28px; }
        .btn-convert { font-size: 16px; }
    }
</style>
</head>
<body>

<div class="wrapper">
    <h1>Image Converter</h1>
    <p class="sub">Upload your image & convert to PDF, JPG, PNG, or WEBP.</p>

    <!-- Upload Box -->
    <label class="upload-box">
        <input type="file" id="imageInput" accept="image/*">
        <strong>Click to Upload Image</strong><br>
        <small>(JPG, PNG, WEBP supported)</small>
    </label>

    <!-- Preview -->
    <div id="preview">
        <h3>Preview:</h3>
        <img id="previewImg" src="">
    </div>

    <!-- Format selection -->
    <div class="format-box">
        <label><strong>Select Output Format:</strong></label><br><br>
        <select id="formatSelect">
            <option value="pdf">PDF</option>
            <option value="jpg">JPG</option>
            <option value="png">PNG</option>
            <option value="webp">WEBP</option>
        </select>
    </div>

    <!-- Convert button -->
    <button class="btn-convert" onclick="convertImage()">Convert</button>

    <!-- Download link -->
    <div id="downloadLink">
        <a id="downloadBtn" download>Download File</a>
    </div>
</div>

<!-- JS LOGIC -->
<script>
let uploadedImage;

document.getElementById("imageInput").addEventListener("change", function() {
    const file = this.files[0];
    const reader = new FileReader();

    reader.onload = function(e){
        uploadedImage = e.target.result;
        document.getElementById("previewImg").src = uploadedImage;
        document.getElementById("preview").style.display = "block";
    };

    reader.readAsDataURL(file);
});

function convertImage(){
    if(!uploadedImage){
        alert("Please upload an image first.");
        return;
    }

    const format = document.getElementById("formatSelect").value;

    if(format === "pdf"){
        convertToPDF();
    } else {
        convertToImage(format);
    }
}

function convertToImage(type){
    const img = new Image();
    img.src = uploadedImage;

    img.onload = function(){
        const canvas = document.createElement("canvas");
        canvas.width = img.width;
        canvas.height = img.height;

        const ctx = canvas.getContext("2d");
        ctx.drawImage(img, 0, 0);

        const out = canvas.toDataURL("image/" + type);

        triggerDownload(out, "converted." + type);
    };
}

function convertToPDF(){
    const img = new Image();
    img.src = uploadedImage;

    img.onload = function(){
        const pdfCanvas = document.createElement("canvas");
        pdfCanvas.width = img.width;
        pdfCanvas.height = img.height;

        const ctx = pdfCanvas.getContext("2d");
        ctx.drawImage(img, 0, 0);

        const pdfData = pdfCanvas.toDataURL("application/pdf");

        triggerDownload(pdfData, "converted.pdf");
    }
}

function triggerDownload(dataUrl, fileName){
    const downloadBtn = document.getElementById("downloadBtn");
    downloadBtn.href = dataUrl;
    downloadBtn.download = fileName;

    document.getElementById("downloadLink").style.display = "block";
}
</script>

</body>
</html>
